<project name="eclipse-deps" xmlns:flies="urn:fedorahosted:flies:ant:eclipse"
	basedir=".">

	<property name="task.project.dir" value="../ant-eclipse-classpath" />
	<property name="build.lib.dir" value="lib" />
	<property name="artifact.name" value="flies-eclipse-task" />
	<property name="artifact.version" value="0.2" />
	<property name="artifact.filename" value="${artifact.name}-${artifact.version}.jar" />
	<property name="artifact.file" value="${build.lib.dir}/${artifact.filename}" />
	<property name="artifact.url"
		value="http://asgeirf.fedorapeople.org/${artifact.filename}" />

	<target name="-check-task-initialized">
		<available property="-fetch-ant-task-done" file="${artifact.file}" />
	</target>

	<target name="-fetch-ant-task" depends="-check-task-initialized"
		unless="-fetch-ant-task-done">
		<mkdir dir="${build.lib.dir}" />
		<ant antfile="${task.project.dir}/build.xml" target="package" inheritall="off"/>
		<copy file="${task.project.dir}/${artifact.filename}" tofile="${artifact.file}"/>
	</target>

	<target name="-initialize-ant-task" depends="-fetch-ant-task">
		<path id="ant-task.classpath">
			<fileset id="test.deps" dir="lib">
				<include name="xom.jar" />
			</fileset>
			<pathelement path="${artifact.file}" />
		</path>
		<typedef resource="org/fedorahosted/flies/ant/antlib.xml" uri="urn:fedorahosted:flies:ant:eclipse"
			classpathref="ant-task.classpath" />
	</target>

</project>