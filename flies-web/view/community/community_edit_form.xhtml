<a4j:form id="communityForm"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    template="../layout/template.xhtml">

  <rich:panel>
      <s:decorate id="nameField" template="../layout/edit.xhtml">
          <ui:define name="label">Name</ui:define>
          <h:inputText id="name" required="true"
                       value="#{communityHome.instance.name}"/>
      </s:decorate>

      <s:decorate id="slugField" template="../layout/edit.xhtml">
          <ui:define name="label">Slug</ui:define>
          <h:inputText id="slug" required="true"
                       value="#{communityHome.instance.slug}" 
                       readonly="#{communityHome.managed}"
                       valueChangeListener="#{communityHome.verifySlugAvailable}">
              <a4j:support event="onblur" reRender="slugField" ajaxSingle="true"/>
            </h:inputText>
      </s:decorate>
      
      <s:decorate id="descriptionField" template="../layout/edit.xhtml">
          <ui:define name="label">Description</ui:define>
          <h:inputText id="description" required="true"
                       value="#{communityHome.instance.description}" style="width:400px;"/>
      </s:decorate>

      <s:decorate id="homeContentField" template="../layout/edit.xhtml">
          <ui:define name="label">Homepage Content</ui:define>
           <rich:editor id="homeContent" 
              width="400" height="300" style="width:400px;"
              required="false"
              value="#{communityHome.instance.homeContent}"
              viewMode="visual" 
              useSeamText="true"
              theme="advanced">
          </rich:editor>
      </s:decorate>

      <div style="clear:both"/>

  </rich:panel>

  <div class="actionButtons">
      <h:commandButton id="save"
                    value="Save"
                   action="#{communityHome.persist}"
                 rendered="#{!communityHome.managed}"/>
      <h:commandButton id="update"
                    value="Save"
                   action="#{communityHome.update}"
                 rendered="#{communityHome.managed}"/>
      <s:button id="cancel"
             value="Cancel"
            action="#{communityHome.cancel}"/>
  </div>

</a4j:form>
