<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view contentType="text/html"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:a="http://richfaces.org/a4j"
        xmlns:s="http://jboss.com/products/seam/taglib"
        xmlns:rich="http://richfaces.org/rich">
<html>
  <head>
    <meta http-equiv="Content-Language" content="en" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>
      <ui:insert name="page-title"/>
      flies
    </title>
    
    <link rel="shortcut icon" href="#{request.contextPath}/img/favicon.ico" type="image/x-icon"/>
    <a:loadStyle src="/stylesheet/reset-fonts-grids.css"/>
    <a:loadStyle src="/stylesheet/base-min.css"/>
    <a:loadStyle src="/stylesheet/theme.css"/>
    <script type="text/javaScript" src="#{request.contextPath}/javascript/chili/jquery.chili-2.2.js"></script> 
    <script type="text/javascript" src="#{request.contextPath}/javascript/splitter.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/javascript/jquery.cookie.js"></script>
    <script type="text/javaScript" src="#{request.contextPath}/javascript/jquery.equalizecols.js"></script> 
    <script type="text/javascript"> 
        ChiliBook.automatic = false;
        ChiliBook.recipeFolder = "#{request.contextPath}/javascript/chili/";

        jQuery(document).ready(function() {
            // splitter
            jQuery("#LeftAndCenterSplitter")
              .splitter({
                  type: 'v',
                  minLeft: '0', 
                  sizeLeft: '200', 
                  maxLeft: '300', 
                  cookie:'lsplitter',
                  outline: 'true',
                  anchorToWindow: true
              });
            jQuery("#CenterAndRightSplitter")
              .splitter({
                  type: 'v',
                  minRight: '0', 
                  sizeRight: '250', 
                  maxRight: '600',
                  cookie:'rsplitter',
                  outline: 'true'
              });
        });
    </script> 
    <ui:insert name="head"/>
  </head>
  <body style="min-width: 750px; background-color: white;">
    <div id="LeftAndCenterSplitter">
      <div id="LeftContent">
        <ui:insert name="left_content"/>
      </div><!--left_content-->    
      <div id="CenterAndRightSplitter">
         <div id="MainContent"> <!-- the "special grid" --> 
              <a:outputPanel ajaxRendered="true">
                <h:messages id="messages" globalOnly="true" styleClass="message"
                    errorClass="errormsg" infoClass="infomsg" warnClass="warnmsg"
                    rendered="#{showGlobalMessages != 'false'}"/>
              </a:outputPanel>
              <div id="main_body_content">
               <ui:insert name="center_content"/>
              </div>
         </div> 
         <div id="RightContent">
           <div id="hd">
             <div id="header_top_right">
               <h:outputText rendered="#{identity.loggedIn}" value="#{authenticatedPerson == null ? identity.username : authenticatedPerson.name} "/>
               <s:fragment rendered="#{not identity.loggedIn}">
                 <s:link view="/account/login.xhtml" value="Sign In" propagation="none"/>
                 <rich:spacer width="10px"/>
                 <s:link view="/account/register.xhtml" value="Register" propagation="none"/>
               </s:fragment>
               <s:link view="/home.xhtml" action="#{identity.logout}" value="Sign Out" rendered="#{identity.loggedIn}" propagation="none"/>
             </div>
             <div id="loading_top_right">
               <a:status>
                 <f:facet name="start">
                   <h:graphicImage  value="/img/loading.gif"/>
                 </f:facet>
               </a:status>
             </div>
           </div>                
           <ui:insert name="right_content"/>
         </div> 
      </div><!--CenterAndRightSplitter-->
    </div><!--LeftAndCenterSplitter-->
  </body>
</html>
</f:view>
