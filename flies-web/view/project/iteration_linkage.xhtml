<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    template="../layout/template.xhtml">

<ui:define name="center_content">
    <rich:jQuery selector="#tab_projects" query="addClass('ui-tabs-selected')" />
    <h1>#{projectIterationHome.instance.name}</h1>

<a4j:form id="iterationForm">

    <rich:panel>
        <s:decorate id="managementTypeField" template="../layout/edit.xhtml">
            <ui:define name="label">Resource Management Type</ui:define>
            <h:selectOneMenu id="managementType" value="#{projectIterationHome.managementType}" required="true">  
              <s:selectItems value="#{managmentTypes}" var="serie" label="#{serie}"/>  
              <a4j:support event="onchange" reRender="mtPanels" ajaxSingle="true"/>  
            </h:selectOneMenu>  
        </s:decorate>

        <a4j:outputPanel id="mtPanels" layout="block">
          <s:div id="settings_webclient" rendered="#{projectIterationHome.managementType == 'REST Client'}"> 
            <s:decorate id="keyField" template="../layout/edit.xhtml">
                <ui:define name="label">API Key</ui:define>
                <h:outputText value="ERWERSDFDFG" />
                <s:button value="Regenerate"></s:button>  
            </s:decorate>
          </s:div>          
          <s:div id="settings_localclient" rendered="#{projectIterationHome.managementType == 'Local File System (Publican)'}"> 
            <s:decorate id="directoryField" template="../layout/edit.xhtml">
                <ui:define name="label">Directory</ui:define>
                <h:inputText value="#{projectIterationHome.instance.localDirectory}" />
            </s:decorate>
          </s:div>          
        </a4j:outputPanel>
        <div style="clear:both"/>

    </rich:panel>

    <div class="actionButtons">
        <h:commandButton id="save"
                      value="Save"
                     action="#{projectIterationHome.persist}"
                   rendered="#{!projectIterationHome.managed}"/>
        <h:commandButton id="update"
                      value="Save"
                     action="#{projectIterationHome.update}"
                   rendered="#{projectIterationHome.managed}"/>
        <s:button id="cancel"
                        value="Cancel"
                         action="#{projectIterationHome.cancel}"/>
    </div>

</a4j:form>

</ui:define>

</ui:composition>
